import{r as o,u as c,d as h,b as f,O as v,Q as g,j as n,a,B as w,L as C,g as d,S as N,A as x}from"./index.a8477470.js";import{c as B,a as t,p as E,b,u as S,T as s}from"./forms.7c2d938f.js";const y=B().shape({email:t().email("Invalid email").required("Required"),firstName:t().max(255),lastName:t().max(255),password:E,passwordConfirmation:t().oneOf([b("password"),null],"Passwords must match")}),R=()=>{const i=c(),u=h(),r=f(v),[l,m]=o.exports.useState(null);o.exports.useEffect(()=>{r!==void 0&&(e.setErrors(r.validationErrors),r.validationErrors.detail!==void 0&&m(r.validationErrors.detail))},[r]);const e=S({initialValues:{email:"",firstName:"",lastName:"",password:"",passwordConfirmation:""},validationSchema:y,async onSubmit(p){(await i(N(p))).payload instanceof x||u(d.home)}});return o.exports.useEffect(()=>{l!==null&&m(null)},[e.values]),o.exports.useEffect(()=>()=>{i(g())},[]),n("div",{className:"form-wrapper",children:[a("h1",{children:"Register"}),n("form",{className:"form",onSubmit:e.handleSubmit,children:[a(s,{name:"email",autoComplete:"email",label:"Email",variant:"outlined",onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.email&&Boolean(e.errors.email),helperText:e.errors.email,value:e.values.email}),a(s,{name:"firstName",autoComplete:"given-name",label:"First name",variant:"outlined",onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.firstName&&Boolean(e.errors.firstName),helperText:e.errors.firstName,value:e.values.firstName}),a(s,{name:"lastName",autoComplete:"family-name",label:"Last name",variant:"outlined",onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.lastName&&Boolean(e.errors.lastName),helperText:e.errors.lastName,value:e.values.lastName}),a(s,{name:"password",autoComplete:"current-password",label:"Password",variant:"outlined",type:"password",onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.password&&Boolean(e.errors.password),helperText:e.errors.password,value:e.values.password}),a(s,{name:"passwordConfirmation",autoComplete:"current-password",label:"Confirm password",variant:"outlined",type:"password",onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.passwordConfirmation&&Boolean(e.errors.passwordConfirmation),helperText:e.errors.passwordConfirmation,value:e.values.passwordConfirmation}),l!==null&&a("p",{className:"text-danger",children:l}),n("div",{className:"form__controls",children:[a(w,{type:"submit",variant:"contained",disabled:!e.isValid,children:"Submit"}),a(C,{to:d.login,children:"Already have account?"})]})]})]})},F=o.exports.memo(R);export{F as RegisterPage};
