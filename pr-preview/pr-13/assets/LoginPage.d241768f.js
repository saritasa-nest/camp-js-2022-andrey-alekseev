import{r as o,u as m,d as p,b as h,s as v,e as f,j as t,a,B as g,L as E,g as n,l as w,A as x}from"./index.a8477470.js";import{c as b,a as B,p as L,u as S,T as d}from"./forms.7c2d938f.js";const C=b().shape({email:B().email("Invalid email").required("Required"),password:L}),N=()=>{const i=m(),u=p(),r=h(v),[s,l]=o.exports.useState(null);o.exports.useEffect(()=>{r!==void 0&&(e.setErrors(r.validationErrors),r.validationErrors.detail!==void 0&&l(r.validationErrors.detail))},[r]);const e=S({initialValues:{email:"",password:""},validationSchema:C,async onSubmit(c){(await i(w(c))).payload instanceof x||u(n.home)}});return o.exports.useEffect(()=>{s!==null&&l(null)},[e.values]),o.exports.useEffect(()=>()=>{i(f())},[]),t("div",{className:"form-wrapper",children:[a("h1",{children:"Login"}),t("form",{className:"form",onSubmit:e.handleSubmit,children:[a(d,{name:"email",autoComplete:"email",label:"Email",variant:"outlined",onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.email&&Boolean(e.errors.email),helperText:e.errors.email,value:e.values.email}),a(d,{name:"password",autoComplete:"current-password",label:"Password",variant:"outlined",type:"password",onChange:e.handleChange,onBlur:e.handleBlur,error:e.touched.password&&Boolean(e.errors.password),helperText:e.errors.password,value:e.values.password}),s!==null&&a("p",{className:"text-danger",children:s}),t("div",{className:"form__controls",children:[a(g,{type:"submit",variant:"contained",disabled:!e.isValid,children:"Submit"}),a(E,{to:n.registration,children:"Don't have account?"})]})]})]})},T=o.exports.memo(N);export{T as LoginPage};
