"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[609],{5609:(B,N,n)=>{n.r(N),n.d(N,{AuthModule:()=>j});var c=n(8692),v=n(9665),Z=n(9638),s=n(92),b=n(2355),l=n(2864),_=n(4762),f=n(3804),y=n(9676),w=n(3288);const E="NoPasswordMatch";class d{static patternValidator(o,t){return a=>null===a.value||o.test(a.value)?null:t}static passwordMatchValidator(o){const t=o.get("password"),a=o.get("confirmPassword");if(null===t)throw new Error("There isn't password control");if(null===a)throw new Error("There isn't confirmPassword control");const R=t.value!==a.value;return R?(a.setErrors({[E]:!0}),{[E]:R}):null}}var i=(()=>{return(e=i||(i={})).MinLength="minlength",e.HasNumber="hasNumber",e.HasLowerCase="hasLowerCase",e.HasUpperCase="hasUpperCase",e.HasSpecialCharacter="hasSpecialCharacter",i;var e})();const A=[s.kI.required,s.kI.minLength(8),s.kI.maxLength(128),d.patternValidator(RegExp("\\d"),{[i.HasNumber]:!0}),d.patternValidator(RegExp("[a-z]"),{[i.HasLowerCase]:!0}),d.patternValidator(RegExp("[A-Z]"),{[i.HasUpperCase]:!0}),d.patternValidator(RegExp("[()[\\]{}|`~!@#$%^&*_\\-+=;:'\",<>./?]"),{[i.HasSpecialCharacter]:!0})],x=[s.kI.required,s.kI.email],h="serverError";function T(e,o){Object.keys(e).forEach(t=>{const a=o.get(t),m=e[t];void 0!==m&&(null!==a?a.setErrors({[h]:m}):o.setErrors({[h]:m}))})}var M=n(3568),S=n(9263);function F(e){return(0,M.K)(o=>{if(o instanceof S.k)return e(o);throw o})}var r=n(4537),U=n(4358),g=n(8659);function I(e,o){if(1&e&&(r.TgZ(0,"mat-error",9),r._uU(1),r.qZA()),2&e){const t=r.oxw();r.xp6(1),r.hij(" ",t.loginForm.getError(t.serverErrorKey)," ")}}let u=class{constructor(o,t,a,m,C){this.formBuilder=o,this.router=t,this.route=a,this.authService=m,this.changeDetectorRef=C,this.routePaths=w.X,this.loginForm=this.formBuilder.nonNullable.group({email:["",x],password:["",A]}),this.serverErrorKey=h}onSubmit(){if(!this.loginForm.valid)return;const o=this.loginForm.value;void 0!==o.email&&void 0!==o.password&&this.authService.login({email:o.email,password:o.password}).pipe((0,y.P)(),F(a=>{throw T(a.validationErrors,this.loginForm),this.changeDetectorRef.markForCheck(),a}),(0,f.t)(this)).subscribe(()=>{const a=this.route.snapshot.queryParamMap.get("next")??w.X.home;this.router.navigate([a])})}};function J(e,o){1&e&&(r.TgZ(0,"mat-error",15),r._uU(1," Enter valid email "),r.qZA())}function L(e,o){if(1&e&&(r.TgZ(0,"mat-error",15),r._uU(1),r.qZA()),2&e){const t=r.oxw();r.xp6(1),r.hij(" ",t.registrationForm.controls.email.getError(t.serverErrorKey)," ")}}function q(e,o){1&e&&(r.TgZ(0,"mat-error",15),r._uU(1," Max length for first name is 32. "),r.qZA())}function Y(e,o){if(1&e&&(r.TgZ(0,"mat-error",15),r._uU(1),r.qZA()),2&e){const t=r.oxw();r.xp6(1),r.hij(" ",t.registrationForm.controls.firstName.getError(t.serverErrorKey)," ")}}function P(e,o){1&e&&(r.TgZ(0,"mat-error",15),r._uU(1," Max length for last name is 32. "),r.qZA())}function K(e,o){if(1&e&&(r.TgZ(0,"mat-error",15),r._uU(1),r.qZA()),2&e){const t=r.oxw();r.xp6(1),r.hij(" ",t.registrationForm.controls.lastName.getError(t.serverErrorKey)," ")}}function Q(e,o){if(1&e&&(r.TgZ(0,"mat-error",15),r._uU(1),r.qZA()),2&e){const t=r.oxw();r.xp6(1),r.hij(" ",t.registrationForm.controls.password.getError(t.serverErrorKey)," ")}}function O(e,o){if(1&e&&(r.TgZ(0,"li",16)(1,"em",17),r._uU(2),r.qZA(),r._uU(3),r.qZA()),2&e){const t=o.$implicit,a=r.oxw();r.Q6J("ngClass",a.registrationForm.controls.password.hasError(t.key)||a.registrationForm.controls.password.hasError("required")?"text-danger":"text-success"),r.xp6(2),r.hij(" ",a.registrationForm.controls.password.hasError(t.key)||a.registrationForm.controls.password.hasError("required")?"cancel":"check_circle"," "),r.xp6(1),r.hij(" ",t.value," ")}}function V(e,o){1&e&&(r.TgZ(0,"mat-error"),r._uU(1," Enter same password "),r.qZA())}u.\u0275fac=function(o){return new(o||u)(r.Y36(s.qu),r.Y36(l.F0),r.Y36(l.gz),r.Y36(U.e),r.Y36(r.sBO))},u.\u0275cmp=r.Xpm({type:u,selectors:[["anime-login"]],decls:18,vars:4,consts:[[1,"form-wrapper"],[1,"form",3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","formControlName","email","type","email","name","email","placeholder","example@domain.com"],["matInput","","type","password","formControlName","password","name","password","autocomplete","current-password"],["class","form__base-errors",4,"ngIf"],[1,"form__controls"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"routerLink"],[1,"form__base-errors"]],template:function(o,t){1&o&&(r.TgZ(0,"div",0)(1,"h1"),r._uU(2,"Login"),r.qZA(),r.TgZ(3,"form",1),r.NdJ("ngSubmit",function(){return t.onSubmit()}),r.TgZ(4,"mat-form-field",2)(5,"mat-label"),r._uU(6,"Email"),r.qZA(),r._UZ(7,"input",3),r.qZA(),r.TgZ(8,"mat-form-field",2)(9,"mat-label"),r._uU(10,"Password"),r.qZA(),r._UZ(11,"input",4),r.qZA(),r.YNc(12,I,2,1,"mat-error",5),r.TgZ(13,"div",6)(14,"button",7),r._uU(15,"Submit"),r.qZA(),r.TgZ(16,"a",8),r._uU(17,"Dont have an account?"),r.qZA()()()()),2&o&&(r.xp6(3),r.Q6J("formGroup",t.loginForm),r.xp6(9),r.Q6J("ngIf",t.loginForm.hasError(t.serverErrorKey)),r.xp6(2),r.Q6J("disabled",t.loginForm.invalid),r.xp6(2),r.Q6J("routerLink",t.routePaths.registration))},dependencies:[c.O5,l.yS,g.TO,g.KE,g.hX,v.Nt,Z.lW,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],encapsulation:2,changeDetection:0}),u=(0,_.gn)([(0,f.c)()],u);let p=class{constructor(o,t,a,m){this.formBuilder=o,this.router=t,this.authService=a,this.changeDetectorRef=m,this.routePaths=w.X,this.passwordRulesMessageMap={[i.MinLength]:"Must have at least 8 characters",[i.HasNumber]:"Must have at least 1 number",[i.HasUpperCase]:"Must have at least 1 upper case letter",[i.HasLowerCase]:"Must have at least 1 lower case letter",[i.HasSpecialCharacter]:"Must have at least 1 special character"},this.noPasswordMatchErrorKey=E,this.serverErrorKey=h,this.registrationForm=this.formBuilder.nonNullable.group({email:["",x],password:["",A],confirmPassword:["",s.kI.required],firstName:["",s.kI.maxLength(30)],lastName:["",s.kI.maxLength(30)]},{validators:[d.passwordMatchValidator]})}onSubmit(){if(!this.registrationForm.valid)return;const o=this.registrationForm.value;void 0!==o.email&&void 0!==o.password&&void 0!==o.firstName&&void 0!==o.lastName&&this.authService.register({email:o.email,password:o.password,firstName:o.firstName,lastName:o.lastName}).pipe((0,y.P)(),F(a=>{throw T(a.validationErrors,this.registrationForm),this.changeDetectorRef.markForCheck(),a}),(0,f.t)(this)).subscribe(()=>this.router.navigate([this.routePaths.home]))}};p.\u0275fac=function(o){return new(o||p)(r.Y36(s.qu),r.Y36(l.F0),r.Y36(U.e),r.Y36(r.sBO))},p.\u0275cmp=r.Xpm({type:p,selectors:[["anime-registration"]],decls:40,vars:14,consts:[[1,"form-wrapper"],[1,"form",3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","formControlName","email","type","email","name","email","placeholder","example@domain.com","autocomplete","email"],["class","text-danger",4,"ngIf"],["matInput","","type","text","formControlName","firstName","name","firstName","placeholder","Andrey","autocomplete","given-name"],["matInput","","type","text","formControlName","lastName","name","lastName","placeholder","Alekseev","autocomplete","family-name"],["matInput","","type","password","formControlName","password","name","password","autocomplete","new-password"],[1,"password-errors"],["class","password-errors__item",3,"ngClass",4,"ngFor","ngForOf"],["matInput","","type","password","formControlName","confirmPassword","name","password","autocomplete","new-password"],[4,"ngIf"],[1,"form__controls"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"routerLink"],[1,"text-danger"],[1,"password-errors__item",3,"ngClass"],[1,"material-icons"]],template:function(o,t){1&o&&(r.TgZ(0,"div",0)(1,"h1"),r._uU(2,"Registration"),r.qZA(),r.TgZ(3,"form",1),r.NdJ("ngSubmit",function(){return t.onSubmit()}),r.TgZ(4,"mat-form-field",2)(5,"mat-label"),r._uU(6,"Email"),r.qZA(),r._UZ(7,"input",3),r.YNc(8,J,2,0,"mat-error",4),r.YNc(9,L,2,1,"mat-error",4),r.qZA(),r.TgZ(10,"mat-form-field",2)(11,"mat-label"),r._uU(12,"First name"),r.qZA(),r._UZ(13,"input",5),r.YNc(14,q,2,0,"mat-error",4),r.YNc(15,Y,2,1,"mat-error",4),r.qZA(),r.TgZ(16,"mat-form-field",2)(17,"mat-label"),r._uU(18,"Last name"),r.qZA(),r._UZ(19,"input",6),r.YNc(20,P,2,0,"mat-error",4),r.YNc(21,K,2,1,"mat-error",4),r.qZA(),r.TgZ(22,"mat-form-field",2)(23,"mat-label"),r._uU(24,"Password"),r.qZA(),r._UZ(25,"input",7),r.YNc(26,Q,2,1,"mat-error",4),r.qZA(),r.TgZ(27,"ul",8),r.YNc(28,O,4,3,"li",9),r.ALo(29,"keyvalue"),r.qZA(),r.TgZ(30,"mat-form-field",2)(31,"mat-label"),r._uU(32,"Confirm password"),r.qZA(),r._UZ(33,"input",10),r.YNc(34,V,2,0,"mat-error",11),r.qZA(),r.TgZ(35,"div",12)(36,"button",13),r._uU(37,"Submit"),r.qZA(),r.TgZ(38,"a",14),r._uU(39,"Already have an account?"),r.qZA()()()()),2&o&&(r.xp6(3),r.Q6J("formGroup",t.registrationForm),r.xp6(5),r.Q6J("ngIf",t.registrationForm.controls.email.hasError("email")),r.xp6(1),r.Q6J("ngIf",t.registrationForm.controls.email.hasError(t.serverErrorKey)),r.xp6(5),r.Q6J("ngIf",t.registrationForm.controls.firstName.hasError("maxlength")),r.xp6(1),r.Q6J("ngIf",t.registrationForm.controls.firstName.hasError(t.serverErrorKey)),r.xp6(5),r.Q6J("ngIf",t.registrationForm.controls.lastName.hasError("maxlength")),r.xp6(1),r.Q6J("ngIf",t.registrationForm.controls.lastName.hasError(t.serverErrorKey)),r.xp6(5),r.Q6J("ngIf",t.registrationForm.controls.password.hasError(t.serverErrorKey)),r.xp6(2),r.Q6J("ngForOf",r.lcZ(29,12,t.passwordRulesMessageMap)),r.xp6(6),r.Q6J("ngIf",t.registrationForm.hasError(t.noPasswordMatchErrorKey)),r.xp6(2),r.Q6J("disabled",t.registrationForm.invalid),r.xp6(2),r.Q6J("routerLink",t.routePaths.login))},dependencies:[c.mk,c.sg,c.O5,l.yS,g.TO,g.KE,g.hX,v.Nt,Z.lW,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,c.Nd],styles:[".password-errors[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:5px;padding-inline:unset;margin-block-start:unset}.password-errors[_ngcontent-%COMP%]   .password-errors__item[_ngcontent-%COMP%]{display:flex;list-style:none}"],changeDetection:0}),p=(0,_.gn)([(0,f.c)()],p);const k=[{path:"login",component:u,title:"Login"},{path:"registration",component:p,title:"Registration"}];let H=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[l.Bz.forChild(k),l.Bz]}),e})(),j=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[c.ez,b.m,H,v.c,Z.ot,s.UX]}),e})()}}]);