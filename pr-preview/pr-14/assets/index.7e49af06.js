import{r as e,u as f,d as v,e as E,b as x,s as F,g as b,a,j as i,T as L,B as w,L as S,h as m,l as y,A as P}from"./index.1245426b.js";import{c as C,a as k,p as A,u as T,F as V,b as j,d as p,T as d,e as q,f as B}from"./FormWrapper.f3b91f69.js";import"./List.e64b35cc.js";const D=C().shape({email:k().email("Invalid email").required("Required"),password:A}),I=()=>{const n=f(),u=v(),[h]=E(),o=x(F),[s,l]=e.exports.useState(null);e.exports.useEffect(()=>{o!==void 0&&(r.setErrors(o.validationErrors),o.validationErrors.detail!==void 0&&l(o.validationErrors.detail))},[o]);const r=T({initialValues:{email:"",password:""},validationSchema:D,async onSubmit(t){const c=await n(y(t));if(c.payload instanceof P)throw c.payload;const g=h.get("next")??m.home;u(g)}});return e.exports.useEffect(()=>{s!==null&&l(null)},[r.values]),e.exports.useEffect(()=>()=>{n(b())},[]),a(V,{value:r,children:i(j,{onSubmit:r.handleSubmit,children:[a(p,{component:d,name:"email",autoComplete:"email",label:"Email"}),a(p,{component:d,name:"password",autoComplete:"current-password",label:"Password",type:"password"}),s!==null&&a(L,{sx:t=>({color:t.palette.error.main}),children:s}),i(q,{children:[a(w,{type:"submit",variant:"contained",disabled:!r.isValid,children:"Submit"}),a(S,{to:m.registration,children:"Don't have account?"})]})]})})},N=e.exports.memo(I),R=()=>i(B,{children:[a("h1",{children:"Login"}),a(N,{})]}),$=e.exports.memo(R);export{$ as LoginPage};
