import{r as a,u as g,d as v,e as E,b as x,s as F,g as L,a as o,j as i,T as b,B as w,L as S,h as u,l as y,A as C}from"./index.628e5fa1.js";import{c as P,a as k,p as A,u as T,F as V,b as j,d as h,T as f,e as q,f as B}from"./FormWrapper.1ff8361f.js";import"./List.e82d98f9.js";const D=P().shape({email:k().email("Invalid email").required("Required"),password:A}),I=()=>{const n=g(),l=v(),c=E(),e=x(F),[s,m]=a.exports.useState(null);a.exports.useEffect(()=>{e!==void 0&&(r.setErrors(e.validationErrors),e.validationErrors.detail!==void 0&&m(e.validationErrors.detail))},[e]);const r=T({initialValues:{email:"",password:""},validationSchema:D,async onSubmit(t){const d=await n(y(t));if(d.payload instanceof C)throw d.payload;if(c.state===null){l(u.home);return}const{from:p}=c.state;p!==void 0&&l(p)}});return a.exports.useEffect(()=>{s!==null&&m(null)},[r.values]),a.exports.useEffect(()=>()=>{n(L())},[]),o(V,{value:r,children:i(j,{onSubmit:r.handleSubmit,children:[o(h,{component:f,name:"email",autoComplete:"email",label:"Email"}),o(h,{component:f,name:"password",autoComplete:"current-password",label:"Password",type:"password"}),s!==null&&o(b,{sx:t=>({color:t.palette.error.main}),children:s}),i(q,{children:[o(w,{type:"submit",variant:"contained",disabled:!r.isValid,children:"Submit"}),o(S,{to:u.registration,children:"Don't have account?"})]})]})})},N=a.exports.memo(I),R=()=>i(B,{children:[o("h1",{children:"Login"}),o(N,{})]}),$=a.exports.memo(R);export{$ as LoginPage};
